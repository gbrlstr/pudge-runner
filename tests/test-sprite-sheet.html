<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <div class="original">
            <h2>Sprite Sheet Original</h2>
            <div class="sprite-selector">
                <select id="spriteSelect" onchange="changeSpriteSheet()">
                    <optgroup label="üèÉ Player">
                        <option value="pudge">Pudge (Player)</option>
                    </optgroup>
                    <optgroup label="üëæ Inimigos B√°sicos (Lv 1-5)">
                        <option value="meepo">Meepo</option>
                        <option value="ghost">Ghost</option>
                        <option value="mad">Mad</option>
                        <option value="spoon">Spoon</option>
                    </optgroup>
                    <optgroup label="‚öîÔ∏è Inimigos Intermedi√°rios (Lv 6-10)">
                        <option value="boss">Boss</option>
                        <option value="ghost02">Ghost 02</option>
                        <option value="glad">Glad (Pump Glad)</option>
                        <option value="sad">Sad (Pump Sad)</option>
                    </optgroup>
                    <optgroup label="üî• Inimigos Avan√ßados (Lv 11-15)">
                        <option value="bat">Bat</option>
                        <option value="bloodthirsty">Bloodthirsty</option>
                        <option value="necromancer">Necromancer</option>
                    </optgroup>
                    <optgroup label="üíÄ Inimigos Extremos (Lv 16+)">
                        <option value="broodmother">Broodmother</option>
                        <option value="tb">Terrorblade</option>
                    </optgroup>
                </select>
                <div class="sprite-info" id="spriteInfo">
                    <span class="level-badge" id="levelBadge">Player</span>
                    <span class="behavior-badge" id="behaviorBadge">Normal</span>
                </div>
            </div>
            <br>
            <img id="originalSprite" src="../assets/imgs/pudge.png" alt="Sprite Sheet" style="max-width: 100%;">
        </div>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Sprite Sheet - Pudge Runner</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #1a1a1a;
            color: white;
            font-family: Arial, sans-serif;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .sprite-selector {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            margin: 20px 0;
        }
        
        .sprite-selector select {
            padding: 10px 15px;
            background: #333;
            color: white;
            border: 2px solid #4CAF50;
            border-radius: 8px;
            font-size: 16px;
            min-width: 300px;
        }
        
        .sprite-info {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .level-badge, .behavior-badge {
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }
        
        .level-badge {
            background: #2196F3;
            color: white;
        }
        
        .behavior-badge {
            background: #ff9800;
            color: white;
        }
        
        .original {
            text-align: center;
            margin: 20px 0;
        }
        
        .original img {
            border: 2px solid #4CAF50;
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
        }
        
        .frames {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
            max-width: 100%;
        }
        
        .frame {
            border: 2px solid #2196F3;
            background: linear-gradient(135deg, #333, #444);
            padding: 15px;
            text-align: center;
            border-radius: 10px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .frame:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(33, 150, 243, 0.3);
        }
        
        .frame img {
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
        }
        
        .frame-info {
            margin-top: 5px;
            font-size: 12px;
            color: #ccc;
        }
        
        .controls {
            text-align: center;
            margin: 20px 0;
        }
        
        button {
            padding: 12px 25px;
            margin: 8px;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(76, 175, 80, 0.3);
        }
        
        button:hover {
            background: linear-gradient(135deg, #45a049, #3d8b40);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(76, 175, 80, 0.4);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .config {
            background: linear-gradient(135deg, #333, #444);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        
        .config h3 {
            margin-top: 0;
            color: #4CAF50;
            text-align: center;
        }
        
        .config-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .config-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .config-item label {
            margin-bottom: 5px;
            font-weight: bold;
            color: #ccc;
        }
        
        .config input {
            width: 80px;
            padding: 8px;
            margin: 0;
            text-align: center;
            background: #555;
            color: white;
            border: 2px solid #666;
            border-radius: 5px;
            font-size: 14px;
        }
        
        .config input:focus {
            border-color: #4CAF50;
            outline: none;
        }
        
        .status {
            text-align: center;
            margin: 20px 0;
            padding: 10px;
            border-radius: 5px;
        }
        
        .success {
            background: #4CAF50;
        }
        
        .error {
            background: #f44336;
        }
        
        .warning {
            background: #ff9800;
        }
        
        .footer-info {
            text-align: center;
            margin: 40px 0 20px 0;
            padding: 20px;
            background: linear-gradient(135deg, #333, #444);
            border-radius: 10px;
            border-left: 4px solid #4CAF50;
        }
        
        .footer-info h4 {
            color: #4CAF50;
            margin-bottom: 10px;
        }
        
        .enemy-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        
        .stat-item {
            background: #555;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
        }
        
        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #4CAF50;
        }
        
        .stat-label {
            font-size: 12px;
            color: #ccc;
            text-transform: uppercase;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé® Teste de Extra√ß√£o de Sprite Sheet - Pudge Runner</h1>
        <p style="text-align: center; color: #ccc; margin-bottom: 30px;">
            Testador interativo para todas as sprite sheets do jogo. Agora com 15 inimigos organizados por n√≠vel de dificuldade!
        </p>
        
        <div class="original">
            <h2>Sprite Sheet Original</h2>
            <img id="originalSprite" src="../assets/imgs/pudge.png" alt="Pudge Sprite Sheet" style="max-width: 100%;">
        </div>
        
        <div class="config">
            <h3>‚öôÔ∏è Configura√ß√£o da Extra√ß√£o</h3>
            <div class="config-grid">
                <div class="config-item">
                    <label>Largura do Frame:</label>
                    <input type="number" id="frameWidth" value="64" min="16" max="256">
                </div>
                <div class="config-item">
                    <label>Altura do Frame:</label>
                    <input type="number" id="frameHeight" value="64" min="16" max="256">
                </div>
                <div class="config-item">
                    <label>Total de Frames:</label>
                    <input type="number" id="totalFrames" value="8" min="1" max="32">
                </div>
                <div class="config-item">
                    <label>Frames por Linha:</label>
                    <input type="number" id="framesPerRow" value="8" min="1" max="16">
                </div>
            </div>
        </div>
        
        <div class="controls">
            <button onclick="extractFrames()">üîÑ Extrair Frames</button>
            <button onclick="testAnimation()">‚ñ∂Ô∏è Testar Anima√ß√£o</button>
            <button onclick="resetConfig()">üîß Resetar Config</button>
            <button onclick="showSpriteDetails()">‚ÑπÔ∏è Detalhes do Sprite</button>
        </div>
        
        <div id="status" class="status"></div>
        
        <div class="frames" id="framesContainer">
            <!-- Frames extra√≠dos aparecer√£o aqui -->
        </div>
        
        <div class="original" id="animationTest" style="display: none;">
            <h2>üé¨ Teste de Anima√ß√£o</h2>
            <canvas id="animationCanvas" width="128" height="128" style="border: 2px solid #ff9800; image-rendering: pixelated;"></canvas>
            <div>
                <button onclick="startAnimation()">‚ñ∂Ô∏è Iniciar</button>
                <button onclick="stopAnimation()">‚è∏Ô∏è Parar</button>
                <button onclick="stepFrame()">‚è≠Ô∏è Pr√≥ximo Frame</button>
            </div>
            <div id="animInfo">Frame: 0 | FPS: 15</div>
        </div>
        
        <div class="footer-info">
            <h4>üìä Estat√≠sticas do Sistema de Inimigos</h4>
            <p>Sistema completo com 15 tipos de inimigos organizados em 4 categorias de dificuldade</p>
            <div class="enemy-stats">
                <div class="stat-item">
                    <div class="stat-number">15</div>
                    <div class="stat-label">Total Inimigos</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">4</div>
                    <div class="stat-label">Categorias</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">11</div>
                    <div class="stat-label">Comportamentos</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">20+</div>
                    <div class="stat-label">N√≠veis Suportados</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let extractedFrames = [];
        let animationId = null;
        let currentFrame = 0;
        let lastTime = 0;
        const frameRate = 15; // FPS da anima√ß√£o
        
        // Configura√ß√µes das sprite sheets (mesmo do Game.js)
        const spriteConfigs = {
            // Player
            pudge: {
                frameWidth: 66,
                frameHeight: 48,
                totalFrames: 8,
                framesPerRow: 8,
                category: "Player",
                level: "Player",
                behavior: "Controlled"
            },
            // Inimigos B√°sicos (Lv 1-5)
            meepo: {
                frameWidth: 45,
                frameHeight: 50,
                totalFrames: 6,
                framesPerRow: 6,
                category: "B√°sico",
                level: "Lv 1-5",
                behavior: "Normal"
            },
            ghost: {
                frameWidth: 54,
                frameHeight: 50,
                totalFrames: 8,
                framesPerRow: 8,
                category: "B√°sico",
                level: "Lv 1-5",
                behavior: "Floating"
            },
            mad: {
                frameWidth: 32,
                frameHeight: 32,
                totalFrames: 4,
                framesPerRow: 4,
                category: "B√°sico",
                level: "Lv 1-5",
                behavior: "Erratic"
            },
            spoon: {
                frameWidth: 44,
                frameHeight: 44,
                totalFrames: 45,
                framesPerRow: 45,
                category: "B√°sico",
                level: "Lv 1-5",
                behavior: "Normal"
            },
            // Inimigos Intermedi√°rios (Lv 6-10)
            boss: {
                frameWidth: 86,
                frameHeight: 58,
                totalFrames: 9,
                framesPerRow: 9,
                category: "Intermedi√°rio",
                level: "Lv 6-10",
                behavior: "Heavy"
            },
            ghost02: {
                frameWidth: 32,
                frameHeight: 35,
                totalFrames: 8,
                framesPerRow: 8,
                category: "Intermedi√°rio",
                level: "Lv 6-10",
                behavior: "Floating"
            },
            glad: {
                frameWidth: 32,
                frameHeight: 32,
                totalFrames: 4,
                framesPerRow: 4,
                category: "Intermedi√°rio",
                level: "Lv 6-10",
                behavior: "Charging"
            },
            sad: {
                frameWidth: 32,
                frameHeight: 32,
                totalFrames: 4,
                framesPerRow: 4,
                category: "Intermedi√°rio",
                level: "Lv 6-10",
                behavior: "Defensive"
            },
            // Inimigos Avan√ßados (Lv 11-15)
            bat: {
                frameWidth: 90,
                frameHeight: 85,
                totalFrames: 10,
                framesPerRow: 10,
                category: "Avan√ßado",
                level: "Lv 11-15",
                behavior: "Flying"
            },
            bloodthirsty: {
                frameWidth: 32,
                frameHeight: 32,
                totalFrames: 4,
                framesPerRow: 4,
                category: "Avan√ßado",
                level: "Lv 11-15",
                behavior: "Aggressive"
            },
            necromancer: {
                frameWidth: 54,
                frameHeight: 64,
                totalFrames: 8,
                framesPerRow: 8,
                category: "Avan√ßado",
                level: "Lv 11-15",
                behavior: "Magical"
            },
            // Inimigos Extremos (Lv 16+)
            broodmother: {
                frameWidth: 140,
                frameHeight: 72,
                totalFrames: 20,
                framesPerRow: 20,
                category: "Extremo",
                level: "Lv 16+",
                behavior: "Spawner"
            },
            tb: {
                frameWidth: 32,
                frameHeight: 32,
                totalFrames: 4,
                framesPerRow: 4,
                category: "Extremo",
                level: "Lv 16+",
                behavior: "Demon"
            }
        };
        
        function changeSpriteSheet() {
            const select = document.getElementById('spriteSelect');
            const selectedSprite = select.value;
            const img = document.getElementById('originalSprite');
            
            // Atualizar imagem
            img.src = `../assets/imgs/${selectedSprite}.png`;
            img.alt = `${selectedSprite} Sprite Sheet`;
            
            // Atualizar configura√ß√£o automaticamente
            const config = spriteConfigs[selectedSprite];
            if (config) {
                document.getElementById('frameWidth').value = config.frameWidth;
                document.getElementById('frameHeight').value = config.frameHeight;
                document.getElementById('totalFrames').value = config.totalFrames;
                document.getElementById('framesPerRow').value = config.framesPerRow;
                
                // Atualizar badges informativos
                document.getElementById('levelBadge').textContent = config.level;
                document.getElementById('behaviorBadge').textContent = config.behavior;
                
                // Atualizar cores dos badges baseado na categoria
                const levelBadge = document.getElementById('levelBadge');
                const behaviorBadge = document.getElementById('behaviorBadge');
                
                switch(config.category) {
                    case 'Player':
                        levelBadge.style.background = '#9C27B0';
                        break;
                    case 'B√°sico':
                        levelBadge.style.background = '#4CAF50';
                        break;
                    case 'Intermedi√°rio':
                        levelBadge.style.background = '#2196F3';
                        break;
                    case 'Avan√ßado':
                        levelBadge.style.background = '#FF9800';
                        break;
                    case 'Extremo':
                        levelBadge.style.background = '#F44336';
                        break;
                }
                
                // Cor do behavior badge baseado no comportamento
                switch(config.behavior) {
                    case 'Controlled':
                        behaviorBadge.style.background = '#9C27B0';
                        break;
                    case 'Normal':
                        behaviorBadge.style.background = '#4CAF50';
                        break;
                    case 'Floating':
                    case 'Flying':
                        behaviorBadge.style.background = '#2196F3';
                        break;
                    case 'Erratic':
                    case 'Aggressive':
                        behaviorBadge.style.background = '#FF5722';
                        break;
                    case 'Heavy':
                    case 'Defensive':
                        behaviorBadge.style.background = '#795548';
                        break;
                    case 'Charging':
                        behaviorBadge.style.background = '#FF9800';
                        break;
                    case 'Magical':
                    case 'Spawner':
                    case 'Demon':
                        behaviorBadge.style.background = '#9C27B0';
                        break;
                }
                
                updateStatus(`Configura√ß√£o carregada para ${selectedSprite} (${config.category} - ${config.behavior})`, 'success');
            }
        }
        
        function updateStatus(message, type = 'success') {
            const status = document.getElementById('status');
            status.textContent = message;
            status.className = `status ${type}`;
        }
        
        function resetConfig() {
            const select = document.getElementById('spriteSelect');
            const selectedSprite = select.value;
            const config = spriteConfigs[selectedSprite];
            
            if (config) {
                document.getElementById('frameWidth').value = config.frameWidth;
                document.getElementById('frameHeight').value = config.frameHeight;
                document.getElementById('totalFrames').value = config.totalFrames;
                document.getElementById('framesPerRow').value = config.framesPerRow;
                updateStatus(`Configura√ß√£o resetada para ${selectedSprite}`, 'warning');
            }
        }
        
        async function extractFrames() {
            try {
                updateStatus('Extraindo frames...', 'warning');
                
                // Obter configura√ß√£o
                const config = {
                    frameWidth: parseInt(document.getElementById('frameWidth').value),
                    frameHeight: parseInt(document.getElementById('frameHeight').value),
                    totalFrames: parseInt(document.getElementById('totalFrames').value),
                    framesPerRow: parseInt(document.getElementById('framesPerRow').value)
                };
                
                // Carregar sprite sheet
                const spriteSheet = document.getElementById('originalSprite');
                
                // Limpar frames anteriores
                extractedFrames = [];
                const container = document.getElementById('framesContainer');
                container.innerHTML = '';
                
                // Extrair cada frame
                for (let i = 0; i < config.totalFrames; i++) {
                    const frameCanvas = document.createElement('canvas');
                    frameCanvas.width = config.frameWidth;
                    frameCanvas.height = config.frameHeight;
                    const frameCtx = frameCanvas.getContext('2d');
                    
                    // Calcular posi√ß√£o do frame na sprite sheet
                    const col = i % config.framesPerRow;
                    const row = Math.floor(i / config.framesPerRow);
                    const sourceX = col * config.frameWidth;
                    const sourceY = row * config.frameHeight;
                    
                    // Extrair o frame
                    frameCtx.drawImage(
                        spriteSheet,
                        sourceX, sourceY, config.frameWidth, config.frameHeight,
                        0, 0, config.frameWidth, config.frameHeight
                    );
                    
                    // Adicionar ao array
                    extractedFrames.push(frameCanvas);
                    
                    // Criar elemento visual com informa√ß√µes melhoradas
                    const frameDiv = document.createElement('div');
                    frameDiv.className = 'frame';
                    frameDiv.innerHTML = `
                        <img src="${frameCanvas.toDataURL()}" style="width: 80px; height: 80px;">
                        <div class="frame-info">
                            <strong>Frame ${i}</strong><br>
                            <small>Pos: ${sourceX},${sourceY}</small><br>
                            <small>Size: ${config.frameWidth}x${config.frameHeight}</small>
                        </div>
                    `;
                    container.appendChild(frameDiv);
                }
                
                updateStatus(`‚úÖ ${extractedFrames.length} frames extra√≠dos com sucesso!`, 'success');
                
            } catch (error) {
                updateStatus(`‚ùå Erro ao extrair frames: ${error.message}`, 'error');
                console.error('Erro:', error);
            }
        }
        
        function testAnimation() {
            if (extractedFrames.length === 0) {
                updateStatus('‚ùå Extraia os frames primeiro!', 'error');
                return;
            }
            
            document.getElementById('animationTest').style.display = 'block';
            updateStatus('üé¨ Modo de teste de anima√ß√£o ativado', 'success');
        }
        
        function startAnimation() {
            if (animationId) stopAnimation();
            
            const canvas = document.getElementById('animationCanvas');
            const ctx = canvas.getContext('2d');
            
            function animate(timestamp) {
                if (timestamp - lastTime >= 1000 / frameRate) {
                    // Limpar canvas
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    
                    // Desenhar frame atual
                    if (extractedFrames[currentFrame]) {
                        const scale = 2; // Escala para visualiza√ß√£o
                        ctx.imageSmoothingEnabled = false;
                        ctx.drawImage(
                            extractedFrames[currentFrame],
                            0, 0, 64, 64,
                            0, 0, 128, 128
                        );
                    }
                    
                    // Pr√≥ximo frame
                    currentFrame = (currentFrame + 1) % extractedFrames.length;
                    
                    // Atualizar info
                    document.getElementById('animInfo').textContent = 
                        `Frame: ${currentFrame} | FPS: ${frameRate} | Total: ${extractedFrames.length}`;
                    
                    lastTime = timestamp;
                }
                
                animationId = requestAnimationFrame(animate);
            }
            
            animate(0);
        }
        
        function stopAnimation() {
            if (animationId) {
                cancelAnimationFrame(animationId);
                animationId = null;
            }
        }
        
        function stepFrame() {
            if (extractedFrames.length === 0) return;
            
            const canvas = document.getElementById('animationCanvas');
            const ctx = canvas.getContext('2d');
            
            // Limpar canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Desenhar frame atual
            if (extractedFrames[currentFrame]) {
                ctx.imageSmoothingEnabled = false;
                ctx.drawImage(
                    extractedFrames[currentFrame],
                    0, 0, 64, 64,
                    0, 0, 128, 128
                );
            }
            
            // Pr√≥ximo frame
            currentFrame = (currentFrame + 1) % extractedFrames.length;
            
            // Atualizar info
            document.getElementById('animInfo').textContent = 
                `Frame: ${currentFrame} | Manual | Total: ${extractedFrames.length}`;
        }
        
        // Carregar e extrair automaticamente ao carregar a p√°gina
        window.onload = function() {
            // Configurar sprite inicial
            changeSpriteSheet();
            
            document.getElementById('originalSprite').onload = function() {
                const select = document.getElementById('spriteSelect');
                updateStatus(`Sprite sheet ${select.value} carregada. Clique em "Extrair Frames" para come√ßar.`, 'warning');
            };
            
            // Se a imagem j√° estiver carregada
            if (document.getElementById('originalSprite').complete) {
                const select = document.getElementById('spriteSelect');
                updateStatus(`Sprite sheet ${select.value} carregada. Clique em "Extrair Frames" para come√ßar.`, 'warning');
            }
        };
        
        // Fun√ß√£o para mostrar informa√ß√µes detalhadas do sprite
        function showSpriteDetails() {
            const select = document.getElementById('spriteSelect');
            const selectedSprite = select.value;
            const config = spriteConfigs[selectedSprite];
            
            if (config) {
                const details = `
üéÆ Sprite: ${selectedSprite}
üìÇ Categoria: ${config.category}
üéØ N√≠vel: ${config.level}
ü§ñ Comportamento: ${config.behavior}
üìè Dimens√µes: ${config.frameWidth}x${config.frameHeight}px
üéûÔ∏è Total de Frames: ${config.totalFrames}
üìê Frames por Linha: ${config.framesPerRow}
                `;
                
                alert(details);
            }
        }
        
        console.log('üé® Teste de Sprite Sheet iniciado com 15 inimigos!');
        console.log('üìä Categorias dispon√≠veis:');
        console.log('   üëæ B√°sicos (4): meepo, ghost, mad, spoon');
        console.log('   ‚öîÔ∏è Intermedi√°rios (4): boss, ghost02, glad, sad');  
        console.log('   üî• Avan√ßados (3): bat, bloodthirsty, necromancer');
        console.log('   üíÄ Extremos (2): broodmother, tb');
        console.log('Use os controles para testar a extra√ß√£o de qualquer sprite!');
    </script>
</body>
</html>
